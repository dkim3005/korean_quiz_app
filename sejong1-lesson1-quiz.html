<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1 Quiz: Self-introduction</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; }
        .answer-btn { transition: all 0.2s; }
        .answer-btn.selected { border-color: #3b82f6; background-color: #eff6ff; color: #1e40af; font-weight: bold; }
        .feedback { display: none; }
        .feedback.visible { display: block; }
        .answer-icon { display: none; }
        .answer-icon.visible { display: inline-block; }
    </style>
</head>
<body class="bg-slate-50">
    <div class="container mx-auto px-4 py-12 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-black text-gray-800">Lesson 1 Quiz</h1>
            <p class="text-gray-600 mt-2">Topic: Self-introduction</p>
        </header>

        <div id="result-summary" class="hidden mb-6 p-4 text-center font-bold text-xl bg-blue-100 text-blue-800 rounded-lg"></div>

        <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg space-y-4">
            </div>

        <footer class="mt-8 text-center space-x-2 sm:space-x-4">
            <a href="./sejong1-lesson1-notes.html" class="bg-gray-200 text-gray-700 font-bold py-3 px-4 sm:px-6 rounded-lg hover:bg-gray-300 transition">Back to Notes</a>
            <button id="reset-btn" class="bg-gray-500 text-white font-bold py-3 px-4 sm:px-6 rounded-lg hover:bg-gray-600 transition">Try Again</button>
            <button id="grade-btn" class="bg-indigo-500 text-white font-bold py-3 px-4 sm:px-6 rounded-lg hover:bg-indigo-600 transition">Grade My Answers</button>
        </footer>
    </div>

    <script>
        const quizData = [
            { question: "What is '학생' in English?", answers: ["Teacher", "Student", "Doctor", "Friend"], correct: "Student", explanation: "'학생' means 'Student' in English." },
            { question: "What is 'Country' in Korean?", answers: ["이름", "사람", "도시", "나라"], correct: "나라", explanation: "'나라' is the Korean word for 'Country'." },
            { question: "Choose the correct particle: 저___ 타나카입니다.", answers: ["는", "은", "이", "가"], correct: "는", explanation: "Use '는' after a noun ending in a vowel, like '저'." },
            { question: "Choose the correct particle: 이 사람___ 학생입니다.", answers: ["는", "은", "를", "도"], correct: "은", explanation: "Use '은' after a noun ending in a consonant, like '사람'." },
            { question: "Choose the correct ending: 저는 회사원___.", answers: ["이에요", "예요", "입니다"], correct: "이에요", explanation: "Use '이에요' after a noun ending in a consonant, like '회사원'." },
            { question: "Choose the correct ending: 저는 의사___.", answers: ["이에요", "예요", "에서"], correct: "예요", explanation: "Use '예요' after a noun ending in a vowel, like '의사'." },
            { question: "'My name is Yuna.' in Korean is:", answers: ["저는 유나 씨입니다.", "제 이름은 유나입니다.", "유나는 이름입니다."], correct: "제 이름은 유나입니다.", explanation: "'제 이름은' means 'My name is'. '유나입니다' correctly states the name." },
            { question: "What is '선생님' in English?", answers: ["Office Worker", "Teacher", "Student", "Police Officer"], correct: "Teacher", explanation: "'선생님' means 'Teacher'." },
            { question: "Choose the correct particle: 이것___ 책입니다.", answers: ["은", "는", "가", "를"], correct: "은", explanation: "Use '은' after a noun ending in a consonant, like '이것'." },
            { question: "Choose the correct ending: 아니요, 저___ 아니에요.", answers: ["이에요", "예요", "에서"], correct: "예요", explanation: "Use '예요' after a noun ending in a vowel, like '저'." },
            { question: "Which one means 'American'?", answers: ["한국 사람", "미국 나라", "미국 사람", "미국"], correct: "미국 사람", explanation: "'미국' is America, and '사람' is person. So, '미국 사람' is an American person." },
            { question: "'A: 안녕하세요. B: ___'", answers: ["감사합니다.", "안녕하세요.", "미안합니다.", "괜찮아요."], correct: "안녕하세요.", explanation: "'안녕하세요' is the standard response to '안녕하세요'." },
            { question: "What is '회사원' in English?", answers: ["Student", "Office Worker", "Name", "House"], correct: "Office Worker", explanation: "'회사원' means 'Office Worker'." },
            { question: "Choose the correct particle: 유나 씨___ 학생이에요?", answers: ["는", "은", "를", "가"], correct: "는", explanation: "Use '는' after a noun ending in a vowel, like '씨'." },
            { question: "Choose the correct ending: 이것은 제 이름___.", answers: ["예요", "이에요", "에서"], correct: "이에요", explanation: "Use '이에요' after a noun ending in a consonant, like '이름'." },
            { question: "'No, I am not a student.' in Korean is:", answers: ["네, 학생입니다.", "아니요, 학생이 아니에요.", "네, 학생이 아니에요."], correct: "아니요, 학생이 아니에요.", explanation: "'아니요' means 'No', and '학생이 아니에요' is the correct negative form." },
            { question: "What is '이름' in English?", answers: ["Person", "Country", "Name", "City"], correct: "Name", explanation: "'이름' means 'Name'." },
            { question: "Choose the correct particle: 선생님___ 한국 사람입니다.", answers: ["은", "는", "가", "를"], correct: "은", explanation: "Use '은' after a noun ending in a consonant, like '선생님'." },
            { question: "Choose the correct ending: 마이클 씨___?", answers: ["예요", "이에요", "입니다"], correct: "예요", explanation: "Use '예요' after a noun ending in a vowel, like '씨'." },
            { question: "A: 어느 나라 사람이에요? B: ___", answers: ["저는 학생이에요.", "저는 한국 사람이에요.", "제 이름은 유나예요."], correct: "저는 한국 사람이에요.", explanation: "The question asks for nationality, so '저는 한국 사람이에요' (I am Korean) is the correct answer." }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const gradeBtn = document.getElementById('grade-btn');
        const resetBtn = document.getElementById('reset-btn');
        const summaryEl = document.getElementById('result-summary');
        let userAnswers = new Array(quizData.length).fill(null);

        function buildQuiz() {
            quizContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'py-6 border-b border-gray-200';
                
                const answerButtons = q.answers.map(answer => 
                    `<button class="answer-btn w-full text-left p-4 mt-2 border-2 border-gray-200 rounded-lg hover:bg-slate-100" data-question-index="${index}">${answer}</button>`
                ).join('');

                questionDiv.innerHTML = `
                    <p class="text-lg font-semibold text-gray-700">
                        <span class="font-bold text-indigo-600">Q${index + 1}:</span> ${q.question}
                    </p>
                    <div class="answers mt-2" id="answers-${index}">${answerButtons}</div>
                    <div class="feedback mt-4 p-4 rounded-md bg-gray-50 text-gray-700" id="feedback-${index}"></div>
                `;
                quizContainer.appendChild(questionDiv);
            });
            
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.addEventListener('click', selectAnswer);
            });
        }
        
        function selectAnswer(event) {
            const selectedBtn = event.target;
            const qIndex = parseInt(selectedBtn.dataset.questionIndex);
            
            // Store the answer
            userAnswers[qIndex] = selectedBtn.textContent;
            
            // Update styles
            const answerGroup = document.getElementById(`answers-${qIndex}`).querySelectorAll('.answer-btn');
            answerGroup.forEach(btn => btn.classList.remove('selected'));
            selectedBtn.classList.add('selected');
        }

        gradeBtn.addEventListener('click', function() {
            let score = 0;
            quizData.forEach((q, index) => {
                const answerGroup = document.getElementById(`answers-${index}`).querySelectorAll('.answer-btn');
                const feedbackEl = document.getElementById(`feedback-${index}`);
                
                answerGroup.forEach(btn => {
                    btn.disabled = true;
                    btn.classList.remove('hover:bg-slate-100');
                    
                    const isCorrect = btn.textContent === q.correct;
                    const isSelected = userAnswers[index] === btn.textContent;
                    
                    // Add icons
                    let iconSpan = document.createElement('span');
                    iconSpan.className = 'answer-icon ml-2';
                    
                    if (isCorrect) {
                        iconSpan.innerHTML = '&#10004;'; // Check mark
                        btn.style.borderColor = '#10B981';
                        iconSpan.style.color = '#10B981';
                    }
                    
                    if (isSelected && !isCorrect) {
                        iconSpan.innerHTML = '&#10006;'; // X mark
                        btn.style.borderColor = '#EF4444';
                        iconSpan.style.color = '#EF4444';
                    }
                    
                    if(iconSpan.innerHTML !== '') {
                        iconSpan.classList.add('visible');
                        btn.appendChild(iconSpan);
                    }
                });

                if (userAnswers[index] === q.correct) {
                    score++;
                    feedbackEl.style.backgroundColor = '#ecfdf5';
                    feedbackEl.style.borderColor = '#10b981';
                    feedbackEl.style.borderLeftWidth = '4px';
                } else {
                    feedbackEl.style.backgroundColor = '#fef2f2';
                    feedbackEl.style.borderColor = '#ef4444';
                    feedbackEl.style.borderLeftWidth = '4px';
                }

                feedbackEl.innerHTML = `<p class="font-bold">Explanation:</p><p>${q.explanation}</p>`;
                feedbackEl.classList.add('visible');
_
            });
            
            summaryEl.textContent = `Result: You got ${score} out of ${quizData.length} correct!`;
            summaryEl.classList.remove('hidden');
            window.scrollTo(0, 0); // Scroll to top to see result
            this.disabled = true;
            resetBtn.disabled = false;
        });

        resetBtn.addEventListener('click', function() {
            userAnswers.fill(null);
            buildQuiz();
            summaryEl.classList.add('hidden');
            gradeBtn.disabled = false;
            this.disabled = true;
        });

        // Initial setup
        buildQuiz();
        resetBtn.disabled = true;
    </script>
</body>
</html>
